<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=0, minimum-scale=1, maximum-scale=5">
    <title>ì¤‘ì•™ìŠ¤í…Œì´</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" type="image/png" href="https://taejun09.github.io/jungang/assets/image/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="https://taejun09.github.io/jungang/assets/image/favicon.svg" />
    <link rel="shortcut icon" href="https://taejun09.github.io/jungang/assets/image/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="https://taejun09.github.io/jungang/assets/image/apple-touch-icon.png" />

    <!-- PWA ì„¤ì • -->
    <link rel="manifest" href="manifest.json">

    <!-- iOSì—ì„œ ì „ì²´ í™”ë©´ í‘œì‹œ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ì¤‘ì•™ê³  ìŠ¤í…Œì´ ëª¨ë°”ì¼">

    <link href="jungang-main.css" rel="stylesheet" type="text/css"/>
</head>
<body>

    <h1>ã…¤</h1><br><h2>ã…¤</h2>

<body class="!bg-[#101012] text-white">
    <div class="max-w-sm mx-auto bg-gray-900 min-h-screen p-4">
 <!-- í—¤ë” -->
 <div class="flex justify-between items-center mb-6">
    <div class="flex items-center space-x-3">
        <img src="https://taejun09.github.io/jungang/assets/image/jungang-main_logo.png" alt="ì¤‘ì•™ì¤‘ ë¡œê³ " class="w-10 h-10 rounded-full">
        <span class="text-[#D9D9D9] text-lg font-semibold tracking-wide">êµ°ì‚°ì¤‘ì•™ê³  ìŠ¤í…Œì´</span>
    </div>
    <div class="flex space-x-4">
        <!-- í•™ìƒì´ë¦„ í‘œì‹œ -->
        <span id="welcomeUser" class="bg-[#363740] text-[#BFBFBF] px-4 py-2 rounded-lg">
            ë¡œë”© ì¤‘...
        </span>        
    </div>
</div>
<script>
(function() {
    try {
        let loggedInUser = localStorage.getItem("loggedInUser");

        if (!loggedInUser) {
            window.location.replace("https://taejun09.github.io/jungang/login");
        } else {
            // âœ… sessionStorageì—ë„ ë¡œê·¸ì¸ ì •ë³´ ë³µêµ¬ (ìƒˆë¡œê³ ì¹¨í•´ë„ ìœ ì§€)
            sessionStorage.setItem("loggedInUser", loggedInUser);

            document.getElementById("welcomeUser").innerText = `${loggedInUser}ë‹˜`;
        }
    } catch (error) {
        console.error("ë¡œê·¸ì¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
        window.location.replace("https://taejun09.github.io/jungang/login");
    }
})();

</script>




<script>
    document.addEventListener("DOMContentLoaded", function () {
        const mealPopup = document.getElementById("meal-popup");
        const closeMealPopupBtn = document.getElementById("close-meal-popup");
        const mealInfoBtn = document.getElementById("meal-info-btn");
        const mealPopupContent = document.getElementById("meal-popup-content");

        const breakfastEl = document.getElementById("breakfast");
        const lunchEl = document.getElementById("lunch");
        const dinnerEl = document.getElementById("dinner");

        const apiKey = "fb6483a86ea640fc8fbf761c34c66f62"; 
        const schoolCode = "8321116"; 
        const districtCode = "P10"; 

        function getToday() {
            const today = new Date();
            return today.toISOString().split("T")[0].replace(/-/g, ""); 
        }

        async function fetchMealInfo() {
            const today = getToday();
            const apiUrl = `https://open.neis.go.kr/hub/mealServiceDietInfo?KEY=${apiKey}&Type=json&ATPT_OFCDC_SC_CODE=${districtCode}&SD_SCHUL_CODE=${schoolCode}&MLSV_YMD=${today}`;

            try {
                const response = await fetch(apiUrl);
                const data = await response.json();

                if (data.mealServiceDietInfo) {
                    const meals = data.mealServiceDietInfo[1].row;

                    let breakfast = "ì—†ìŒ";
                    let lunch = "ì—†ìŒ";
                    let dinner = "ì—†ìŒ";

                    meals.forEach(meal => {
                        const mealType = meal.MMEAL_SC_NM;
                        const menu = meal.DDISH_NM.replace(/<br\/>/g, ", ");

                        if (mealType === "ì¡°ì‹") breakfast = menu;
                        if (mealType === "ì¤‘ì‹") lunch = menu;
                        if (mealType === "ì„ì‹") dinner = menu;
                    });

                    breakfastEl.innerText = breakfast;
                    lunchEl.innerText = lunch;
                    dinnerEl.innerText = dinner;
                } else {
                    breakfastEl.innerText = "ì‹ë‹¨ ì •ë³´ ì—†ìŒ";
                    lunchEl.innerText = "ì‹ë‹¨ ì •ë³´ ì—†ìŒ";
                    dinnerEl.innerText = "ì‹ë‹¨ ì •ë³´ ì—†ìŒ";
                }
            } catch (error) {
                console.error("ì‹ë‹¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                breakfastEl.innerText = "ì˜¤ë¥˜ ë°œìƒ";
                lunchEl.innerText = "ì˜¤ë¥˜ ë°œìƒ";
                dinnerEl.innerText = "ì˜¤ë¥˜ ë°œìƒ";
            }
        }

        mealInfoBtn.addEventListener("click", function (event) {
            event.preventDefault(); 
            mealPopup.classList.remove("hidden");
            fetchMealInfo();
            updateLastClick("meal-info");
        });

        closeMealPopupBtn.addEventListener("click", function () {
            mealPopup.classList.add("hidden");
        });

        mealPopup.addEventListener("click", function (event) {
            if (!mealPopupContent.contains(event.target)) {
                mealPopup.classList.add("hidden");
            }
        });

        function updateLastClick(key) {
            const timestamp = Date.now();
            localStorage.setItem(`lastClick-${key}`, timestamp);
            updateLastClickTimes();
        }

        function timeAgo(timestamp) {
            const now = new Date();
            const diff = Math.floor((now - timestamp) / 1000); 

            if (diff < 60) return `${diff}ì´ˆ ì „`;
            if (diff < 3600) return `${Math.floor(diff / 60)}ë¶„ ì „`;
            if (diff < 86400) return `${Math.floor(diff / 3600)}ì‹œê°„ ì „`;
            if (diff < 2592000) return `${Math.floor(diff / 86400)}ì¼ ì „`;
            return `${Math.floor(diff / 2592000)}ê°œì›” ì „`;
        }

        function updateLastClickTimes() {
            document.querySelectorAll(".grid-item").forEach(item => {
                const key = item.getAttribute("data-key");
                const lastClickTime = localStorage.getItem(`lastClick-${key}`);

                if (lastClickTime) {
                    const timeText = timeAgo(new Date(parseInt(lastClickTime)));
                    document.getElementById(`last-click-${key}`).textContent = timeText;
                } else {
                    document.getElementById(`last-click-${key}`).textContent = "ê¸°ë¡ ì—†ìŒ";
                }
            });
        }

        document.querySelectorAll(".grid-item").forEach(item => {
            item.addEventListener("click", function () {
                const key = item.getAttribute("data-key");
                updateLastClick(key);
            });
        });

        updateLastClickTimes();
    });
</script>



<script>
    document.addEventListener("DOMContentLoaded", function () {
        const reportPopup = document.getElementById("report-popup");
        const closeReportPopupBtn = document.getElementById("close-report-popup");
        const reportBtn = document.getElementById("report-btn");
        const reportPopupContent = document.getElementById("report-popup-content");
        const reportText = document.getElementById("report-text");
        const reportRoom = document.getElementById("report-room");
        const submitReportBtn = document.getElementById("submit-report");
        const reportCategory = document.getElementById("report-category");
        const customAlert = document.getElementById("custom-alert");
        const customAlertMessage = document.getElementById("custom-alert-message");
    
        function showAlert(message) {
            customAlertMessage.textContent = message;
            customAlert.classList.remove("hidden");
            setTimeout(() => {
                customAlert.classList.add("hidden");
            }, 3000);
        }
    
        reportBtn.addEventListener("click", function (event) {
            event.preventDefault();
            reportPopup.classList.remove("hidden");
        });
    
        closeReportPopupBtn.addEventListener("click", function () {
            reportPopup.classList.add("hidden");
        });
    
        reportPopup.addEventListener("click", function (event) {
            if (!reportPopupContent.contains(event.target)) {
                reportPopup.classList.add("hidden");
            }
        });
    
        // ì¹´í…Œê³ ë¦¬ ì„ íƒ ì‹œ í˜¸ì‹¤ ì…ë ¥ ë³´ì´ê¸°
        reportCategory.addEventListener("change", function () {
            if (reportCategory.value) {
                reportRoom.classList.remove("hidden");
            } else {
                reportRoom.classList.add("hidden");
            }
            
            if (reportCategory.value === "ê¸°íƒ€") {
                reportText.classList.remove("hidden");
            } else {
                reportText.classList.add("hidden");
            }
        });
    
        submitReportBtn.addEventListener("click", async function () {
            const today = new Date().getDay(); // 0: ì¼ìš”ì¼, 6: í† ìš”ì¼
    
            if (today === 6) { // í† ìš”ì¼ ì²´í¬
                showAlert("ì˜¤ëŠ˜ì€ ì œì¶œí•  ìˆ˜ ì—†ì–´ìš”.");
                return;
            }
    
            const loggedInUser = sessionStorage.getItem("loggedInUser") || "ì•Œ ìˆ˜ ì—†ìŒ"; // ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
            const category = reportCategory.value;
            const room = reportRoom.value.trim();
            const reportContent = reportText.value.trim();
    
            if (!category) {
                showAlert("ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");
                return;
            }
    
            if (!room) {
                showAlert("í˜¸ì‹¤ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }
    
            if (category === "ê¸°íƒ€" && !reportContent) {
                showAlert("ê³ ì¥ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }
    
            const webhookUrl = "https://discord.com/api/webhooks/1355746829207076914/7QdssPZCATpmmMOjuYJg0Y30C00ZfjudEU_YWfOt5N5CQWOZUXImOsqPaSboKl-j0SVC";
            const payload = {
                embeds: [{
                    title: "ğŸ“¢ ê³ ì¥ ì‹ ê³  ì ‘ìˆ˜",
                    color: 15158332,
                    fields: [
                        { name: "ğŸ‘¤ ì‹ ê³ ì", value: loggedInUser, inline: false },  // ì‹ ê³ ì ì¶”ê°€
                        { name: "ğŸ“Œ ì¹´í…Œê³ ë¦¬", value: category, inline: true },
                        { name: "ğŸ  í˜¸ì‹¤", value: room, inline: true },
                        { name: "ğŸ“œ ë‚´ìš©", value: category === "ê¸°íƒ€" ? reportContent : "(ë‚´ìš© ì—†ìŒ)", inline: false }
                    ],
                    timestamp: new Date().toISOString()
                }]
            };
    
            try {
                await fetch(webhookUrl, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });
    
                showAlert("ì‹ ê³ ë¥¼ ì‚¬ê°ì„ ìƒë‹˜ê»˜ ì „ë‹¬í–ˆì–´ìš”!");
                reportPopup.classList.add("hidden");
                reportCategory.value = "";
                reportRoom.value = "";
                reportText.value = "";
                reportText.classList.add("hidden");
                reportRoom.classList.add("hidden");
            } catch (error) {
                console.error("ì „ì†¡ ì˜¤ë¥˜:", error);
                showAlert("ì „ì†¡ ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆì–´ìš”.");
            }
        });
    });
    </script>

<script>
    document.getElementById('closePopup').addEventListener('click', function() {
        document.getElementById('popup').classList.add('hidden');
    });
    
    function closePopup(event) {
        if (event.target.id === 'popup') {
            document.getElementById('popup').classList.add('hidden');
        }
    }
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const popup = document.getElementById("popup");
        const closePopupBtn = document.getElementById("closePopup");
        const submitBtn = document.getElementById("submitRequest");
        const popupTitle = document.getElementById("popupTitle");
        const dateInput = document.getElementById("date");
        const timeInput = document.getElementById("time");
        const teacherInput = document.getElementById("teacher");
        const reasonInput = document.getElementById("reason");
        const discordWebhookUrl = "https://discord.com/api/webhooks/1355746564391305297/cwYOkllq7Ys29kPjy8QiLYI3c5hjiC7V6m1O6y_JunRKYC4WcVU7sjFmr4ziF__Pn2-V";
        let requestType = "ì¶œì… ì‹ ì²­";
    
        function getTeacherByDay() {
            const days = ["ì¼ìš”ì¼", "ì›”ìš”ì¼", "í™”ìš”ì¼", "ìˆ˜ìš”ì¼", "ëª©ìš”ì¼", "ê¸ˆìš”ì¼", "í† ìš”ì¼"];
            const teachers = {
                "ì¼ìš”ì¼": "ì±„ì² ",
                "ì›”ìš”ì¼": "ê¹€ì¢…ì‚¼",
                "í™”ìš”ì¼": "ì„œì˜ì§„",
                "ìˆ˜ìš”ì¼": "ì±„ì² ",
                "ëª©ìš”ì¼": "ê¹€ì¢…ì‚¼",
                "ê¸ˆìš”ì¼": "ì„œì˜ì§„",
                "í† ìš”ì¼": "ì—†ìŒ"
            };
            let today = new Date();
            return teachers[days[today.getDay()]];
        }
    
        function getRoleMention(teacher) {
            const roleMentions = {
                "ì±„ì² ": "<@&1350654320739221545>",
                "ê¹€ì¢…ì‚¼": "<@&1350654434647998494>",
                "ì„œì˜ì§„": "<@&1350654515929415680>"
            };
            return roleMentions[teacher] || "";
        }
    
        document.querySelectorAll(".space-y-2 button").forEach(button => {
            button.addEventListener("click", function () {
                let now = new Date();
                dateInput.value = now.toISOString().split("T")[0];
                timeInput.value = now.toLocaleTimeString("ko-KR", { hour: "2-digit", minute: "2-digit", second: "2-digit" });
                teacherInput.value = getTeacherByDay();
                reasonInput.value = "";
    
                let rawType = this.parentElement.querySelector("span").innerText.trim();
                if (rawType.includes("ì™¸ì¶œ")) {
                    requestType = "ì™¸ì¶œ";
                } else if (rawType.includes("ì™¸ë°•")) {
                    requestType = "ì™¸ë°•";
                } else if (rawType.includes("ì¡°ê¸°")) {
                    requestType = "ì¡°ê¸°í‡´ì†Œ";
                } else {
                    requestType = "ì¶œì… ì‹ ì²­";
                }
    
                popupTitle.innerText = requestType;
                console.log("ì„ íƒëœ ì‹ ì²­ ìœ í˜•:", requestType);
                popup.classList.remove("hidden");
            });
        });
    
        closePopupBtn.addEventListener("click", function () {
            popup.classList.add("hidden");
        });
    
        submitBtn.addEventListener("click", function () {
            const today = new Date().getDay(); // 0: ì¼ìš”ì¼, 6: í† ìš”ì¼
    
            if (today === 6) { // í† ìš”ì¼ì´ë©´ ì‹ ì²­ ë¶ˆê°€
                showCustomAlert("ì˜¤ëŠ˜ì€ ì œì¶œ í•  ìˆ˜ ì—†ì–´ìš”.");
                return;
            }
    
            const loggedInUser = sessionStorage.getItem("loggedInUser") || "ì•Œ ìˆ˜ ì—†ìŒ";
            const teacher = teacherInput.value;
            const roleMention = getRoleMention(teacher);
            const reason = reasonInput.value.trim();
    
            if (!reason) {
                reasonInput.classList.add("highlight");
                reasonInput.placeholder = "ì‚¬ìœ ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. ì˜ˆ) ê°œì¸ì‚¬ìœ ";
                return;
            }
    
            reasonInput.classList.remove("highlight");
    
            const requestData = {
                username: "ì¶œì… ì‹ ì²­ ì•Œë¦¼",
                avatar_url: "https://ifh.cc/g/gqo9gX.jpg",
                content: roleMention,
                embeds: [
                    {
                        title: "ğŸ“Œ ì¶œì… ì‹ ì²­ ì•Œë¦¼",
                        color: 0x3498db,
                        fields: [
                            { name: "ğŸ“ ì‹ ì²­ ìœ í˜•", value: requestType, inline: false },
                            { name: "ğŸ‘¤ ì‹ ì²­ì", value: loggedInUser, inline: false },
                            { name: "ğŸ“… ë‚ ì§œ", value: dateInput.value, inline: false },
                            { name: "â° ì œì¶œ ì‹œê°„", value: timeInput.value, inline: false },
                            { name: "ğŸ‘¨â€ğŸ« ì‚¬ê° ì„ ìƒë‹˜", value: teacher, inline: false },
                            { name: "ğŸ“Œ ì œì¶œ ì‚¬ìœ ", value: reason, inline: false }
                        ],
                        footer: {
                            text: "ì¶œì… ê´€ë¦¬ ì‹œìŠ¤í…œ | êµ°ì‚°ì¤‘ì•™ê³ ë“±í•™êµ",
                            icon_url: "https://ifh.cc/g/30Dsx9.png"
                        },
                        timestamp: new Date().toISOString()
                    }
                ]
            };
    
            fetch(discordWebhookUrl, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(requestData)
            })
            .then(response => {
                if (response.ok) {
                    let customMessage = "";
                    switch (requestType) {
                        case "ì™¸ì¶œ":
                            customMessage = "ì™¸ì¶œ ì‹ ì²­ì„ ì‚¬ê°ì„ ìƒë‹˜ê»˜ ì „ë‹¬í–ˆì–´ìš”!";
                            break;
                        case "ì™¸ë°•":
                            customMessage = "ì™¸ë°• ì‹ ì²­ì„ ì‚¬ê°ì„ ìƒë‹˜ê»˜ ì „ë‹¬í–ˆì–´ìš”!";
                            break;
                        case "ì¡°ê¸°":
                            customMessage = "ì¡°ê¸°í‡´ì‚¬ ì‹ ì²­ì„ ì‚¬ê°ì„ ìƒë‹˜ê»˜ ì „ë‹¬í–ˆì–´ìš”!";
                            break;
                        default:
                            customMessage = "ì¶œì… ì‹ ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤.";
                    }
                    showCustomAlert(customMessage);
                    popup.classList.add("hidden");
                } else {
                    showCustomAlert("ì¶œì… ì‹ ì²­ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                }
            })
            .catch(error => {
                console.error("ì „ì†¡ ì˜¤ë¥˜:", error);
                showCustomAlert("ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            });
        });
    
        function showCustomAlert(message) {
            const alertBox = document.getElementById("custom-alert");
            const alertMessage = document.getElementById("custom-alert-message");
            alertMessage.innerText = message;
            alertBox.classList.remove("hidden");
            setTimeout(() => {
                alertBox.classList.add("hidden");
            }, 3000);
        }
    });
    </script>
    

<!-- ì´ë™ ì‚¬ìœ  ì…ë ¥ íŒì—… -->
<div id="reason-popup" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center hidden z-50">
    <div class="bg-[#1e1e22] p-5 rounded-2xl w-[340px] shadow-lg relative" id="reason-popup-content">
        <button id="close-reason-popup" class="absolute top-5 right-6 text-[#bfbfbf] hover:text-white transition">
            <i class="fa-solid fa-xmark"></i>
        </button>

        <h2 class="text-xl font-bold mb-4 text-[#D9D9D9] flex items-center">
            <i class="fas fa-door-open mr-2"></i> ì—´ëŒì‹¤ ì´ë™ ì‚¬ìœ 
        </h2>

        <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
        <select id="reason-category" class="w-full p-2 bg-[#29292e] text-[#D9D9D9] rounded-md mb-3">
            <option value="">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
            <option value="íœ´ì‹">íœ´ì‹</option>
            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
        </select>

        <!-- ê¸°íƒ€ ì„ íƒ ì‹œ ë‚´ìš© ì…ë ¥ -->
        <textarea id="reason-text" class="w-full p-2 bg-[#29292e] text-[#D9D9D9] rounded-md hidden" rows="4" placeholder="ì´ë™ ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>

        <button id="submit-reason" class="mt-3 bg-[#363740] text-white px-4 py-2 rounded-lg w-full hover:bg-[#2f3033] transition">
            ì œì¶œí•˜ê¸°
        </button>
    </div>
</div>

<!-- ì•Œë¦¼ ë©”ì‹œì§€ -->
<div id="custom-alert" class="fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-[#29292e] text-white py-2 px-4 rounded-lg shadow-lg hidden flex items-center whitespace-nowrap overflow-hidden text-ellipsis">
    <i class="fa-regular fa-circle-check mr-2"></i>
    <span id="custom-alert-message">ì´ë™ ì‚¬ìœ ë¥¼ ì‚¬ê°ì„ ìƒë‹˜ê»˜ ì „ë‹¬í–ˆì–´ìš”!</span>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const reasonPopup = document.getElementById("reason-popup");
        const closeReasonPopupBtn = document.getElementById("close-reason-popup");
        const readingRoomBtn = document.getElementById("reading-room-btn");
        const submitReasonBtn = document.getElementById("submit-reason");
        const reasonText = document.getElementById("reason-text");
        const reasonCategory = document.getElementById("reason-category");
        const customAlert = document.getElementById("custom-alert");
        const customAlertMessage = document.getElementById("custom-alert-message");
    
        function showAlert(message) {
            customAlertMessage.textContent = message;
            customAlert.classList.remove("hidden");
            setTimeout(() => {
                customAlert.classList.add("hidden");
            }, 3000);
        }

        function getTeacherByDay() {
            const days = ["ì¼ìš”ì¼", "ì›”ìš”ì¼", "í™”ìš”ì¼", "ìˆ˜ìš”ì¼", "ëª©ìš”ì¼", "ê¸ˆìš”ì¼", "í† ìš”ì¼"];
            const teachers = {
                "ì¼ìš”ì¼": "ì±„ì² ",
                "ì›”ìš”ì¼": "ê¹€ì¢…ì‚¼",
                "í™”ìš”ì¼": "ì„œì˜ì§„",
                "ìˆ˜ìš”ì¼": "ì±„ì² ",
                "ëª©ìš”ì¼": "ê¹€ì¢…ì‚¼",
                "ê¸ˆìš”ì¼": "ì„œì˜ì§„",
                "í† ìš”ì¼": "ì—†ìŒ"
            };
            let today = new Date();
            return teachers[days[today.getDay()]];
        }

        function getRoleMention(teacher) {
            const roleMentions = {
                "ì±„ì² ": "<@&1350654320739221545>",
                "ê¹€ì¢…ì‚¼": "<@&1350654434647998494>",
                "ì„œì˜ì§„": "<@&1350654515929415680>"
            };
            return roleMentions[teacher] || "";
        }
    
        readingRoomBtn.addEventListener("click", function (event) {
            event.preventDefault();
            reasonPopup.classList.remove("hidden");
        });
    
        closeReasonPopupBtn.addEventListener("click", function () {
            reasonPopup.classList.add("hidden");
        });
    
        reasonCategory.addEventListener("change", function () {
            if (reasonCategory.value === "ê¸°íƒ€") {
                reasonText.classList.remove("hidden");
            } else {
                reasonText.classList.add("hidden");
            }
        });
    
        submitReasonBtn.addEventListener("click", async function () {
            const today = new Date().getDay(); // 0: ì¼ìš”ì¼, 6: í† ìš”ì¼
    
            if (today === 6) { // í† ìš”ì¼ ì²´í¬
                showAlert("ì˜¤ëŠ˜ì€ ì œì¶œí•  ìˆ˜ ì—†ì–´ìš”.");
                return;
            }
    
            const category = reasonCategory.value;
            const reason = reasonText.value.trim();
    
            if (!category) {
                showAlert("ì´ë™ ì‚¬ìœ ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");
                return;
            }
    
            if (category === "ê¸°íƒ€" && !reason) {
                showAlert("ê¸°íƒ€ ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }
    
            // âœ… ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
            const userName = localStorage.getItem("loggedInUser") || "ì•Œ ìˆ˜ ì—†ìŒ";
            const studentID = localStorage.getItem("studentID") || "ë¯¸ì…ë ¥";
            const profileImage = localStorage.getItem("profileImage") || "https://cdn-icons-png.flaticon.com/512/149/149071.png";
    
            // ì˜¤ëŠ˜ì˜ êµì‚¬ì™€ í•´ë‹¹ êµì‚¬ì˜ ì—­í•  ë©˜ì…˜ ê°€ì ¸ì˜¤ê¸°
            const teacher = getTeacherByDay();
            const teacherMention = getRoleMention(teacher);
    
            const webhookUrl = "https://discord.com/api/webhooks/1355747063534452796/gcpSBvWj0amRnG8QcYWaBZCjesewH5NH4XpKfylZi9raz7hjQIvLI-y1cCnHiSkHL7L5";
            const payload = {
                embeds: [{
                    title: "ğŸ“Œ ì—´ëŒì‹¤ ì´ë™ ì‚¬ìœ ",
                    color: 3447003,
                    fields: [
                        { name: "ğŸ‘¤ ì´ë¦„", value: userName, inline: true },
                        { name: "ğŸ“Œ í•™ë²ˆ", value: studentID, inline: true },
                        { name: "ğŸ“Œ ì¹´í…Œê³ ë¦¬", value: category, inline: true },
                        { name: "ğŸ“œ ì‚¬ìœ ", value: category === "ê¸°íƒ€" ? reason : "(ë‚´ìš© ì—†ìŒ)", inline: false },
                        { name: "ğŸ§‘â€ğŸ« ë‹´ë‹¹ êµì‚¬", value: teacher, inline: true },
                        { name: "ğŸ¯ ì•Œë¦¼ë°œì†¡", value: teacherMention, inline: true }
                    ],
                    thumbnail: { url: profileImage }, // í”„ë¡œí•„ ì´ë¯¸ì§€ ì¶”ê°€
                    timestamp: new Date().toISOString()
                }]
            };
    
            try {
                await fetch(webhookUrl, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });
    
                showAlert("ì´ë™ ì‚¬ìœ ê°€ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤.");
                reasonPopup.classList.add("hidden");
                reasonCategory.value = "";
                reasonText.value = "";
                reasonText.classList.add("hidden");
            } catch (error) {
                console.error("ì „ì†¡ ì˜¤ë¥˜:", error);
                showAlert("ì „ì†¡ ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆì–´ìš”.");
            }
        });
    });
</script>



<script>
    // í™”ë©´ì˜ ë„ˆë¹„ê°€ 1024px ì´ìƒì´ë©´ PCë¡œ ê°„ì£¼í•˜ê³  ë¦¬ë‹¤ì´ë ‰íŠ¸
    if (window.innerWidth >= 1024) {
      window.location.href = "https://taejun09.github.io/jungang/pc.html";
    }
  </script>

</body>
</head>


<body>

<!-- ìƒë‹¨í—¤ë” -->
<a href="https://team-nexusway.notion.site/1c54e0b44e5f8056a424c0f6b5a827c3" class="bg-gradient-to-r from-[#1a1a1a] via-[#18181c] to-[#2e2e2e] p-4 rounded-lg mb-4 mt-4 block">
    <div class="flex items-center justify-between">
        <i class="fas fa-gift text-white ml-2"></i>
        <span class="header-text text-white">ì‹ ê·œ ì´ìš©ìë¼ë©´? í™•ì¸í•´ë³´ì„¸ìš”!</span>
        <i class="fas fa-arrow-right text-white mr-2"></i>
    </div>
</a>


<!-- íƒìƒ‰í•˜ê¸° -->
<div class="bg-[#18181c] p-4 rounded-lg mb-4">
    <h2 class="text-lg font-semibold mb-3 flex items-center text-[#D9D9D9]">
        <i class="fas fa-compass mr-2"></i>
        íƒìƒ‰í•˜ê¸°
    </h2>
    <div class="grid-container">
        <a href="#" class="grid-item" id="report-btn" data-key="report">
            <span class="bottom-text">ê³ ì¥ì‹ ê³  Â· <span class="last-click" id="last-click-report">-</span></span>
        </a>
        <a href="#" class="grid-item large" id="reading-room-btn" data-key="reading-room">
            <span class="bottom-text">ì—´ëŒì‹¤ Â· <span class="last-click" id="last-click-reading-room">-</span></span>
        </a>
        <a href="#" class="grid-item" id="meal-info-btn" data-key="meal-info">
            <span class="bottom-text">ì‹ë‹¨ì •ë³´ Â· <span class="last-click" id="last-click-meal-info">-</span></span>
        </a>        
    </div>
</div>



<!-- ëª¨ë°”ì¼ í•™ìƒì¦ -->
<div class="bg-[#18181c] p-4 rounded-lg mb-4">
    <h2 class="text-lg font-semibold mb-3 flex items-center text-[#D9D9D9]">
        <i class="fas fa-id-card mr-2"></i> ëª¨ë°”ì¼ í•™ìƒì¦
    </h2>
    
    <!-- í•™ìƒì¦ ì¹´ë“œ (ì•ë©´/ë’·ë©´) -->
    <div class="relative w-80 h-48 perspective-1000 mx-auto" onclick="flipCard()">
        <div id="studentCard" class="w-full h-full transition-transform duration-500 ease-in-out transform-style-preserve-3d">
            
            <!-- ì•ë©´ -->
            <div class="absolute w-full h-full bg-[#1e1e22] rounded-xl shadow-lg flex items-center px-5 py-3 backface-hidden border border-[#33323A]">
                <img id="schoolLogo" src="https://taejun09.github.io/jungang/assets/image/jungang-main_logo.png" 
                     alt="í•™êµ ë¡œê³ " class="w-14 h-14 rounded-full border-2 border-[#33323A] shadow-md">
                <div class="ml-4 text-left text-[#D9D9D9]">
                    <p id="studentName" class="text-lg font-semibold">ì´ë¦„</p>
                    <p id="studentID" class="text-sm text-[#A0A0A0]">í•™ë²ˆ: </p>
                    <p class="text-xs mt-1 text-[#7C7C7C]">ì¤‘ì•™ê³ ë“±í•™êµ</p>
                </div>
                <div class="ml-auto">
                    <img id="studentPhoto" src="https://ifh.cc/g/7qFrDt.png" 
                         alt="í•™ìƒ ì‚¬ì§„" class="w-16 h-16 rounded-lg border-2 border-[#33323A] shadow-md">
                </div>
            </div>

            <!-- ë’·ë©´ -->
            <div class="absolute w-full h-full bg-[#1e1e22] rounded-xl shadow-lg flex flex-col items-center justify-center rotate-y-180 backface-hidden border border-[#33323A]">
                <p class="text-[#D9D9D9] text-sm font-semibold">ë°œê¸‰ ê¸°ê´€: ì¤‘ì•™ê³ ë“±í•™êµ</p>
                <p class="text-[#A0A0A0] text-xs">ìœ íš¨ê¸°ê°„: 2025ë…„ 12ì›” 31ì¼</p>
                <div class="bg-[#18181c] p-2 rounded-lg mt-3 border border-[#33323A]">
                    <img id="qrCode" src="" alt="QR ì½”ë“œ" class="w-20 h-20">
                </div>
                <p class="text-[#7C7C7C] text-xs mt-2">ì´ í•™ìƒì¦ì€ ë³¸ì¸ í™•ì¸ìš©ì…ë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>
</div>

<script>
    let flipped = false;
    function flipCard() {
        flipped = !flipped;
        document.getElementById("studentCard").style.transform = flipped ? "rotateY(180deg)" : "rotateY(0deg)";
    }

    // í•™ìƒ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ë° ë°˜ì˜
    document.addEventListener("DOMContentLoaded", function () {
        const name = localStorage.getItem("loggedInUser") || "í™ê¸¸ë™";
        const studentID = localStorage.getItem("studentID") || "2025";
        const profileImage = localStorage.getItem("profileImage") || "https://ifh.cc/g/7qFrDt.png";

        document.getElementById("studentName").innerText = name;
        document.getElementById("studentID").innerText = `í•™ë²ˆ: ${studentID}`;
        document.getElementById("studentPhoto").src = profileImage;

        // QR ì½”ë“œ ìƒì„± (ìŠ¤ìº” ì‹œ ì¸ì¦ í˜ì´ì§€ë¡œ ì´ë™)
        const qrData = encodeURIComponent(`https://taejun09.github.io/jungang/verify.html?studentID=${studentID}`);
        document.getElementById("qrCode").src = `https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=${qrData}`;
    });

    // í•™ìƒ ì •ë³´ ì €ì¥ í•¨ìˆ˜
    function saveStudentInfo(name, studentID, profileImage) {
        localStorage.setItem("loggedInUser", name);
        localStorage.setItem("studentID", studentID);
        localStorage.setItem("profileImage", profileImage);
    }
</script>



<style>
    .perspective-1000 {
        perspective: 1000px;
    }
    .transform-style-preserve-3d {
        transform-style: preserve-3d;
    }
    .backface-hidden {
        backface-visibility: hidden;
    }
    .rotate-y-180 {
        transform: rotateY(180deg);
    }
</style>

<!-- ì‹ë‹¨ íŒì—… -->
<div id="meal-popup" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center hidden">
    <div class="bg-[#1e1e22] p-5 rounded-2xl w-[340px] shadow-lg relative" id="meal-popup-content">
        <!-- ë‹«ê¸°(X) ë²„íŠ¼ -->
        <button id="close-meal-popup" class="absolute top-5 right-6 text-[#bfbfbf] hover:text-white transition">
           <i class="fa-solid fa-xmark"></i>
        </button>

        <h2 class="text-xl font-bold mb-4 text-[#D9D9D9] flex items-center">
            <i class="fas fa-utensils mr-2"></i> ì˜¤ëŠ˜ì˜ ì‹ë‹¨
        </h2>
        <div id="meal-content" class="text-[#BFBFBF] space-y-3">
            <div class="meal-section">
                <h3 class="meal-title"><i class="fas fa-sun"></i> ì¡°ì‹</h3>
                <p id="breakfast" class="meal-text">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
            <div class="meal-section">
                <h3 class="meal-title"><i class="fas fa-cloud-sun"></i> ì¤‘ì‹</h3>
                <p id="lunch" class="meal-text">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
            <div class="meal-section">
                <h3 class="meal-title"><i class="fas fa-moon"></i> ì„ì‹</h3>
                <p id="dinner" class="meal-text">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
        </div>
    </div>
</div>



<!-- ê³ ì¥ ì‹ ê³  íŒì—… -->
<div id="report-popup" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center hidden">
    <div class="bg-[#1e1e22] p-5 rounded-2xl w-[340px] shadow-lg relative" id="report-popup-content">
        <button id="close-report-popup" class="absolute top-5 right-6 text-[#bfbfbf] hover:text-white transition">
            <i class="fa-solid fa-xmark"></i>
        </button>

        <h2 class="text-xl font-bold mb-4 text-[#D9D9D9] flex items-center">
            <i class="fas fa-exclamation-triangle mr-2"></i> ê³ ì¥ ì‹ ê³ 
        </h2>
        
        <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
        <select id="report-category" class="w-full p-2 bg-[#29292e] text-[#D9D9D9] rounded-md mb-3">
            <option value="">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
            <option value="í™”ì¥ì‹¤">í™”ì¥ì‹¤</option>
            <option value="ì „ê¸°">ì „ê¸°</option>
            <option value="ì—ì–´ì»¨/ë‚œë°©">ì—ì–´ì»¨/ë‚œë°©</option>
            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
        </select>

        <!-- í˜¸ì‹¤ ì…ë ¥ -->
        <input id="report-room" type="text" class="w-full p-2 bg-[#29292e] text-[#D9D9D9] rounded-md mb-3 hidden" placeholder="í˜¸ì‹¤ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 212í˜¸)">

        <!-- ê¸°íƒ€ ì„ íƒ ì‹œ ë‚´ìš© ì…ë ¥ -->
        <textarea id="report-text" class="w-full p-2 bg-[#29292e] text-[#D9D9D9] rounded-md hidden" rows="4" placeholder="ê³ ì¥ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>

        <button id="submit-report" class="mt-3 bg-[#363740] text-white px-4 py-2 rounded-lg w-full hover:bg-[#2f3033] transition">ì‹ ê³ í•˜ê¸°</button>
    </div>
</div>

<!-- ìì²´ íŒì—… ë©”ì‹œì§€ -->
<div id="custom-alert" class="fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-[#29292e] text-white py-2 px-4 rounded-lg shadow-lg hidden flex items-center whitespace-nowrap overflow-hidden text-ellipsis">
    <i class="fa-regular fa-circle-check mr-2"></i>
    <span id="custom-alert-message">ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.</span>
</div>




<!-- ê³µì§€ì‚¬í•­ -->
<div class="bg-[#18181c] p-4 rounded-lg mb-4">
    <h2 class="text-lg font-semibold mb-4 flex items-center text-[#D9D9D9]">
        <i class="fas fa-newspaper mr-2"></i> ê³µì§€ì‚¬í•­
    </h2>
    <ul id="notice-list" class="space-y-2">
        <li class="bg-[#1e1e22] p-3 rounded-lg flex justify-between items-center hover:bg-[#33323A] transition-all">
            <a href="#" class="flex justify-between w-full items-center">
                <span class="text-[#d4d4d8] text-sm font-medium">[ê³µì§€ì‚¬í•­] êµ°ì‚°ì¤‘ì•™ê³ ë“±í•™êµ</span>
                <span class="text-[#A0A0A0] text-xs">2025.03.04</span>
            </a>
        </li>
        <li class="bg-[#1e1e22] p-3 rounded-lg flex justify-between items-center hover:bg-[#33323A] transition-all">
            <a href="#" class="flex justify-between w-full items-center">
                <span class="text-[#d4d4d8] text-sm font-medium">[ê³µì§€ì‚¬í•­] ì‹ ì…ìƒ ì•ˆë‚´ì‚¬í•­</span>
                <span class="text-[#A0A0A0] text-xs">2025.03.04</span>
            </a>
        </li>
        <li class="bg-[#1e1e22] p-3 rounded-lg flex justify-between items-center hover:bg-[#33323A] transition-all">
            <a href="#" class="flex justify-between w-full items-center">
                <span class="text-[#d4d4d8] text-sm font-medium">[ê³µì§€ì‚¬í•­] ì‹ ì…ìƒ ì£¼ì˜ì‚¬í•­</span>
                <span class="text-[#A0A0A0] text-xs">2025.03.04</span>
            </a>
        </li>
    </ul>
</div>

<!-- ìì²´ íŒì—… ë©”ì‹œì§€ -->
<div id="custom-alert" class="fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-[#29292e] text-white py-2 px-4 rounded-lg shadow-lg hidden flex items-center whitespace-nowrap overflow-hidden text-ellipsis">
    <i class="fa-regular fa-circle-check mr-2"></i>
    <span id="custom-alert-message">ì‹ ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.</span>
</div>

<!-- ì¶œì…ê´€ë¦¬ -->
<div class="bg-[#18181c] p-4 rounded-lg mb-4">
    <h2 class="text-lg font-semibold mb-3 flex items-center text-[#D9D9D9]">
        <i class="fas fa-lock mr-2 text-gray-400"></i> ì¶œì…ê´€ë¦¬
    </h2>
    
    <!-- ì‹ ì²­ ëª©ë¡ -->
    <div class="space-y-2">
        <div class="bg-[#1e1e22] p-3 rounded-lg flex justify-between items-center">
            <span class="text-[#d4d4d8]">ì™¸ì¶œ ì‹ ì²­</span>
            <button class="bg-[#363740] hover:bg-[#4a4b50] text-[#BFBFBF] px-4 py-2 rounded-lg transition-all">
                ì‹ ì²­í•˜ê¸°
            </button>
        </div>
        
        <div class="bg-[#1e1e22] p-3 rounded-lg flex justify-between items-center">
            <span class="text-[#d4d4d8]">ì™¸ë°• ì‹ ì²­</span>
            <button class="bg-[#363740] hover:bg-[#4a4b50] text-[#BFBFBF] px-4 py-2 rounded-lg transition-all">
                ì‹ ì²­í•˜ê¸°
            </button>
        </div>
        
        <div class="bg-[#1e1e22] p-3 rounded-lg flex justify-between items-center">
            <span class="text-[#d4d4d8]">ì¡°ê¸°í‡´ì†Œ ì‹ ì²­</span>
            <button class="bg-[#363740] hover:bg-[#4a4b50] text-[#BFBFBF] px-4 py-2 rounded-lg transition-all">
                ì‹ ì²­í•˜ê¸°
            </button>
        </div>
    </div>
</div>

<!-- ì¶œì… ì‹ ì²­ íŒì—… -->
<div id="popup" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center hidden" onclick="closePopup(event)">
    <div class="bg-[#1e1e22] p-6 rounded-lg w-80 relative" onclick="event.stopPropagation();">
        <!-- ë‹«ê¸°(X) ë²„íŠ¼ -->
        <button id="closePopup" class="absolute top-6 right-3 text-[#bfbfbf] hover:text-white transition">
           <i class="fa-solid fa-xmark"></i>
        </button>
        <h2 id="popupTitle" class="text-lg font-semibold mb-4 text-[#D9D9D9] text-center">ì¶œì… ì‹ ì²­</h2>
        
        <!-- ë‚ ì§œ ë° ì œì¶œ ì‹œê°„ -->
        <div class="mb-3">
            <label class="text-sm text-[#BFBFBF]">ì˜¤ëŠ˜ ë‚ ì§œ</label>
            <input id="date" type="text" class="w-full bg-[#2a2a2e] p-2 rounded text-[#D9D9D9]" readonly>
        </div>

        <div class="mb-3">
            <label class="text-sm text-[#BFBFBF]">ì œì¶œ ì‹œê°„</label>
            <input id="time" type="text" class="w-full bg-[#2a2a2e] p-2 rounded text-[#D9D9D9]" readonly>
        </div>

        <!-- ë‹´ë‹¹ ì„ ìƒë‹˜ -->
        <div class="mb-3">
            <label class="text-sm text-[#BFBFBF]">ê¸ˆì¼ ì‚¬ê° ì„ ìƒë‹˜</label>
            <input id="teacher" type="text" class="w-full bg-[#2a2a2e] p-2 rounded text-[#D9D9D9]" readonly>
        </div>

        <!-- ì œì¶œ ì‚¬ìœ  ì…ë ¥ -->
        <div class="mb-4">
            <label class="text-sm text-[#BFBFBF]">ì œì¶œ ì‚¬ìœ </label>
            <textarea id="reason" class="w-full bg-[#2a2a2e] p-2 rounded text-[#D9D9D9] rows="3" placeholder="ì‚¬ìœ ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. ì˜ˆ) ê°œì¸ì‚¬ìœ "></textarea>
        </div>

        <!-- ë²„íŠ¼ -->
        <div class="flex justify-center">
            <button id="submitRequest" class="bg-[#4a4b50] px-4 py-2 rounded text-white">ì œì¶œí•˜ê¸°</button>
        </div>
    </div>
</div>



<div class="mobile_popup">
    <a href="https://taejun09.github.io/jungang/" class="menu_item">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25"><path fill="#F0F0F0" fill-rule="evenodd" d="M22.195 10.903 13.984 3.69a2 2 0 0 0-2.676.032l-7.79 7.185a2 2 0 0 0-.643 1.47V20.5a2 2 0 0 0 2 2h6v-5a2 2 0 1 1 4 0v5h6a2 2 0 0 0 2-2v-8.094a2 2 0 0 0-.68-1.503" clip-rule="evenodd"></path></svg>
        <span>í™ˆ</span>
    </a>

    <a href="https://taejun09.github.io/jungang/page/content" class="menu_item">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25"><g fill="#ADB5BD" fill-rule="evenodd" clip-path="url(#clip0_1636_2717)" clip-rule="evenodd"><path d="M3.625 5.5a2.75 2.75 0 0 1 2.75-2.75h12a2.75 2.75 0 0 1 2.75 2.75v6.55a.75.75 0 0 1-1.5 0V5.5c0-.69-.56-1.25-1.25-1.25h-12c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h7.5a.75.75 0 0 1 0 1.5h-7.5a2.75 2.75 0 0 1-2.75-2.75z"></path><path d="M7.625 7.5a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5h-8a.75.75 0 0 1-.75-.75M20.345 19.669a.75.75 0 0 1 1.06 0l2.5 2.5a.75.75 0 1 1-1.06 1.06l-2.5-2.5a.75.75 0 0 1 0-1.06"></path><path d="M17.875 20.2a3 3 0 1 0 0-6 3 3 0 0 0 0 6m0 1.5a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9"></path></g><defs><clipPath id="clip0_1636_2717"><path fill="#fff" d="M.375.5h24v24h-24z"></path></clipPath></defs></svg>
        <span>ì½˜í…ì¸ </span>
    </a>

    <a href="#" class="menu_item" onclick="openMyPage()">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25"><path fill="#ADB5BD" fill-rule="evenodd" d="M12.125 11a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m0 1.5a5 5 0 1 0 0-10 5 5 0 0 0 0 10M12.125 15.25c-4.642 0-8.25 3.326-8.25 7.25a.75.75 0 0 1-1.5 0c0-4.913 4.45-8.75 9.75-8.75s9.75 3.837 9.75 8.75a.75.75 0 0 1-1.5 0c0-3.924-3.608-7.25-8.25-7.25" clip-rule="evenodd"></path></svg>
        <span>MY</span>
    </a>
</div>


<!-- ê³„ì • ì„¤ì • íŒì—… -->
<div id="accountPopup" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-[#18181c] rounded-2xl shadow-xl p-6 w-[90%] max-w-md text-center space-y-5 relative border border-[#2e2e32]">
      <!-- ë‹«ê¸° ë²„íŠ¼ -->
      <button onclick="closeAccountPopup()" class="absolute top-3 right-3 text-gray-400 hover:text-white text-xl">
        &times;
      </button>
  
      <!-- í—¤ë” -->
      <h2 class="text-2xl font-bold text-white">ê³„ì • ì„¤ì •</h2>
  
      <!-- í”„ë¡œí•„ ì •ë³´ -->
      <div class="flex flex-col items-center gap-2">
        <img id="popupImage" src="" alt="í”„ë¡œí•„ ì´ë¯¸ì§€"
             class="w-20 h-20 rounded-full object-cover border-2 border-gray-600 shadow-sm" />
        <p class="text-gray-300"><strong>ì´ë¦„:</strong> <span id="popupName" class="font-medium"></span></p>
        <p class="text-gray-300"><strong>í•™ë²ˆ:</strong> <span id="popupID" class="font-medium"></span></p>
        <p class="text-gray-300"><strong>ê¸°ìˆ™ì‚¬:</strong> <span id="popupDormitory" class="font-medium"></span></p>
      </div>
  
      <!-- ê²½ê³  ì •ë³´ -->
      <div id="warningSection" class="bg-[#2b2c30] border-l-4 border-red-500 p-4 shadow-md rounded-xl text-left space-y-3 w-full">
        <div class="flex items-center gap-2">
          <svg class="w-5 h-5 text-red-400" fill="none" stroke="currentColor" stroke-width="2"
               viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
                  d="M12 9v2m0 4h.01M12 5a7 7 0 00-7 7v1a7 7 0 007 7h1a7 7 0 007-7v-1a7 7 0 00-7-7z" />
          </svg>
          <p class="text-red-300 font-semibold">ëˆ„ì  ê²½ê³ : <span id="warningCount">0</span>íšŒ</p>
        </div>
        
        <div>
          <p class="text-sm text-gray-200 font-medium">ğŸ“Œ ìµœê·¼ ê²½ê³  ë‚´ì—­</p>
          <ul id="recentWarnings" class="list-disc pl-5 text-sm text-gray-400 mt-1 space-y-1">
            <li>ê²½ê³  ë‚´ì—­ ì—†ìŒ</li>
          </ul>
        </div>
      </div>
  
      
      <div class="pt-4 flex justify-center gap-3">
        <button onclick="logout()" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg shadow transition">
          ë¡œê·¸ì•„ì›ƒ
        </button>
      </div>
    </div>
  </div>

  <script>
     function closeAccountPopup() {
    const popup = document.getElementById("accountPopup");
    if (popup) {
      popup.classList.add("hidden");
    }
  }
async function openMyPage() {
  const name = localStorage.getItem("loggedInUser");
  const id = localStorage.getItem("studentID");
  const dormitory = localStorage.getItem("dormitory");
  const image = localStorage.getItem("profileImage");

  if (name && id) {
    document.getElementById("popupName").innerText = name;
    document.getElementById("popupID").innerText = id;
    document.getElementById("popupDormitory").innerText = dormitory;
    document.getElementById("popupImage").src = image || "https://via.placeholder.com/80";
    document.getElementById("accountPopup").classList.remove("hidden");

    // ğŸ›‘ ê²½ê³  ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    try {
      const response = await fetch("https://script.google.com/macros/s/AKfycbxLPFaImo1Dz8IFxLftbSKf16sEZYySYswZ0r7cjVruxpoMKdqbrBHoqLWuxSUBJo_W/exec");
      const data = await response.json();

      // userNameê³¼ studentIDë¥¼ ë¬¸ìì—´ë¡œ ê°•ì œ ë³€í™˜ í›„ ë¹„êµ
      const matchingEntry = data.find(entry =>
        String(entry.userName || "").trim() === name &&
        String(entry.studentID || "").trim() === id
      );

      if (matchingEntry && matchingEntry.warningList) {
        const warnings = matchingEntry.warningList
          .split("||")
          .map(w => w.trim())
          .filter(Boolean); // ë¹ˆ í•­ëª© ì œê±°

        document.getElementById("warningCount").innerText = warnings.length;

        const warningListEl = document.getElementById("recentWarnings");
        warningListEl.innerHTML = "";

        warnings.slice(-3).reverse().forEach(warning => {
          const li = document.createElement("li");
          li.textContent = warning;
          warningListEl.appendChild(li);
        });
      } else {
        document.getElementById("warningCount").innerText = "0";
        document.getElementById("recentWarnings").innerHTML = "<li>ê²½ê³  ê¸°ë¡ ì—†ìŒ</li>";
      }
    } catch (err) {
      console.error("ê²½ê³  ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
      document.getElementById("warningCount").innerText = "N/A";
      document.getElementById("recentWarnings").innerHTML = "<li>ì„œë²„ ì˜¤ë¥˜</li>";
    }
  } else {
    showCustomAlert("ë¡œê·¸ì¸ì´ í•„ìš”í•´ìš”! í™ˆì—ì„œ ì¸ì¦ ë¨¼ì € í•´ì£¼ì„¸ìš”.");
  }
}
  </script>

<script>
let lastScrollY = window.scrollY; // ë§ˆì§€ë§‰ ìŠ¤í¬ë¡¤ ìœ„ì¹˜
const mobilePopup = document.querySelector(".mobile_popup");

document.addEventListener("scroll", function () {
    const currentScrollY = window.scrollY;

    // ëª¨ë°”ì¼ í™”ë©´ì—ì„œë§Œ ë™ì‘í•˜ë„ë¡ ì„¤ì •
    if (window.innerWidth <= 768) {
        if (currentScrollY > lastScrollY) {
            // ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤ ì‹œ
            mobilePopup.style.transform = "translateY(100%)"; // íŒì—…ì„ ì•„ë˜ë¡œ ìˆ¨ê¹€
        } else {
            // ìœ„ë¡œ ìŠ¤í¬ë¡¤ ì‹œ
            mobilePopup.style.transform = "translateY(0)"; // íŒì—…ì„ ë‹¤ì‹œ ë³´ì„
        }
        lastScrollY = currentScrollY; // ë§ˆì§€ë§‰ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
    }
});
</script>

<style>
    .mobile_popup {
    display: flex;
    justify-content: space-around;
    align-items: center;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #1e1e22;
    padding: 10px;
    border-radius: 10px 10px 0 0;
    z-index: 9999;
    border: 1px solid #383840;
    top: 91%;
    transform: translateY(100%); /* ì´ˆê¸° ìƒíƒœì—ì„œ ì•„ë˜ë¡œ ìˆ¨ê¹€ */
    transition: transform 0.3s ease-in-out; /* ë¶€ë“œëŸ¬ìš´ ì „í™˜ */
}

@media screen and (max-width: 768px) {
    .page-wrapper {
      display: none;
    }

    .mobile_popup {
      display: flex;
    }

    .menu_item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      color: #333;
      cursor: pointer;
      text-decoration: none;
    }

    .menu_item svg {
      width: 26px;
      height: 26px;
      margin-bottom: 5px;
    }

    .menu_item span {
      font-size: 12px;
    }

    .menu_item:hover {
      opacity: 0.8;
    }
  }


  .menu_item span {
    font-size: 12px;
    color: #f0f0f0;
}
</style>


<script>
    let idleTimer;
    let isUserActive = true;
  
    // ê°•ë ¥ ìƒˆë¡œ ê³ ì¹¨ í•¨ìˆ˜ (ìºì‹œ ë¬´ì‹œ)
    function forceReload() {
      console.log("10ì´ˆê°„ í™œë™ ì—†ìŒ â†’ ê°•ë ¥ ìƒˆë¡œê³ ì¹¨");
      location.reload(true); // trueëŠ” ìºì‹œ ë¬´ì‹œ (ë‹¨, ì¼ë¶€ ë¸Œë¼ìš°ì €ëŠ” ë¬´ì‹œí•¨)
      // ë³´ì¥í•˜ë ¤ë©´ ì•„ë˜ì²˜ëŸ¼ query íŒŒë¼ë¯¸í„°ë¡œ ìš°íšŒí•˜ëŠ” ë°©ë²•ë„ ìˆìŒ
      // location.href = location.pathname + '?reload=' + new Date().getTime();
    }
  
    // ì‚¬ìš©ì í™œë™ ê°ì§€ í•¨ìˆ˜
    function resetIdleTimer() {
      if (!isUserActive) {
        console.log("ì‚¬ìš©ì í™œë™ ê°ì§€ë¨. íƒ€ì´ë¨¸ ì´ˆê¸°í™”");
      }
      isUserActive = true;
      clearTimeout(idleTimer);
      idleTimer = setTimeout(() => {
        isUserActive = false;
  
        // í˜„ì¬ ì°½ì´ **ì—´ë ¤ ìˆê³ **, ì‚¬ìš©ì ì…ë ¥ì´ ì—†ì—ˆë‹¤ë©´ ìƒˆë¡œê³ ì¹¨
        if (document.visibilityState === 'visible') {
          forceReload();
        }
      }, 10000); // 10ì´ˆ
    }
  
    // ì‚¬ìš©ì í™œë™ ì´ë²¤íŠ¸ ë°”ì¸ë”©
    ['mousemove', 'scroll', 'keydown', 'click', 'touchstart'].forEach(event => {
      window.addEventListener(event, resetIdleTimer, { passive: true });
    });
  
    // í˜ì´ì§€ê°€ ì²˜ìŒ ë¡œë“œë  ë•Œ íƒ€ì´ë¨¸ ì‹œì‘
    resetIdleTimer();
  
    // íƒ­ì´ ë°±ê·¸ë¼ìš´ë“œë¡œ ì „í™˜ë˜ì—ˆë‹¤ê°€ ëŒì•„ì˜¬ ë•Œ ë‹¤ì‹œ ì²´í¬
    document.addEventListener("visibilitychange", () => {
      if (document.visibilityState === 'visible') {
        resetIdleTimer();
      }
    });
  </script>

 
<!-- í‘¸í„° -->
<footer id="footer" class="bg-[#18181c] py-8 px-4 md:px-12 text-[#D9D9D9] text-sm rounded-lg">
    <div class="max-w-screen-md mx-auto">
        <!-- íšŒì‚¬ ì •ë³´ -->
        <div class="text-[#A0A0A0] leading-relaxed mb-6">
            <p class="font-semibold text-[#D9D9D9]">íŒ€ ë„¥ì„œìŠ¤ì›¨ì´</p>
            <p>ëŒ€í‘œ: ê¹€íƒœì¤€</p>
            <p>ì£¼ì†Œ: ì „ë¶íŠ¹ë³„ìì¹˜ë„ êµ°ì‚°ì‹œ ì„±ì‚°ë©´ êµ°ì¥ëŒ€ê¸¸ 13</p>
            <p class="mt-2">Â© 2025. Team NexusWay.</p>
        </div>

        <!-- ê°œì¸ì •ë³´ ë³´í˜¸ -->
        <div class="mb-6">
            <p class="font-semibold text-[#D9D9D9] flex items-center">
                <a href="https://team-nexusway.notion.site/1c54e0b44e5f801d827ecd375356fe87#1c54e0b44e5f804394bfde69324a9b2b" class="text-[#D9D9D9] hover:text-blue-500">ê°œì¸ì •ë³´ ë³´í˜¸ì¤‘</a> <i class="fas fa-check-circle text-blue-500 ml-1"></i>
            </p>
            <p class="text-[#A0A0A0]">ë„¥ì„œìŠ¤ì›¨ì´ëŠ” ê³ ê°ë‹˜ì˜ ê°œì¸ì •ë³´ ë³´í˜¸ë¥¼ ìœ„í•´ ìµœì„ ì˜ ë…¸ë ¥ì„ ë‹¤í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <!-- ì•½ê´€ -->
        <div class="flex space-x-6 text-[#A0A0A0]">
            <a href="https://team-nexusway.notion.site/1c54e0b44e5f8067b7adefd8cd26f647" class="hover:text-white transition">ì„œë¹„ìŠ¤ ì´ìš© ì•½ê´€</a>
            <a href="https://team-nexusway.notion.site/1c54e0b44e5f801d827ecd375356fe87#1c54e0b44e5f804394bfde69324a9b2b" class="hover:text-white transition">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a>
            <a href="https://team-nexusway.notion.site/1c54e0b44e5f8063a008d4823fd7d425" class="hover:text-white transition">ì œì•ˆí•˜ê¸°</a>
        </div>
    </div>
</footer>

    <script>
        // ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js').then(registration => {
                console.log('âœ… Service Worker ë“±ë¡ ì„±ê³µ:', registration.scope);

                // ì—…ë°ì´íŠ¸ê°€ ìˆì„ ë•Œ ì²˜ë¦¬
                registration.onupdatefound = () => {
                    const newWorker = registration.installing;
                    console.log('ğŸš€ ìƒˆ ì„œë¹„ìŠ¤ ì›Œì»¤ ê°ì§€ë¨!');

                    // ìƒˆ ì›Œì»¤ ìƒíƒœê°€ 'installed'ì¼ ë•Œ
                    newWorker.onstatechange = () => {
                        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                            console.log('ğŸ”„ ìƒˆë¡œìš´ ì—…ë°ì´íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤!');

                            // ğŸ“¢ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ í‘œì‹œ
                            alert('ìƒˆë¡œìš´ ì—…ë°ì´íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤! í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì¹¨í•˜ì„¸ìš”.');

                            // ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì›Œì»¤ ì¦‰ì‹œ í™œì„±í™”
                            newWorker.postMessage({ type: 'skipWaiting' });

                            // í˜ì´ì§€ ìë™ ìƒˆë¡œ ê³ ì¹¨
                            window.location.reload();
                        }
                    };
                };
            }).catch(error => {
                console.log('âŒ Service Worker ë“±ë¡ ì‹¤íŒ¨:', error);
            });

            // ì„œë¹„ìŠ¤ ì›Œì»¤ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë³€ê²½ë  ë•Œ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                console.log('ğŸ”„ ì„œë¹„ìŠ¤ ì›Œì»¤ê°€ ìƒˆë¡œ ê³ ì¹¨ë¨!');
                window.location.reload();
            });
        }
    </script>







</div>
</body>
</html>

