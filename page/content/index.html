<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=0, minimum-scale=1, maximum-scale=5">
    <title>ì¤‘ì•™ìŠ¤í…Œì´ ì½˜í…ì¸ </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" type="image/png" href="https://taejun09.github.io/jungang/assets/image/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="https://taejun09.github.io/jungang/assets/image/favicon.svg" />
    <link rel="shortcut icon" href="https://taejun09.github.io/jungang/assets/image/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="https://taejun09.github.io/jungang/assets/image/apple-touch-icon.png" />

    <!-- PWA ì„¤ì • -->
    <link rel="manifest" href="manifest.json">

    <!-- iOSì—ì„œ ì „ì²´ í™”ë©´ í‘œì‹œ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ì¤‘ì•™ê³  ìŠ¤í…Œì´ ëª¨ë°”ì¼">

    <link href="Jungang-content.css" rel="stylesheet" type="text/css"/>
</head>
<body>

    <h1>ã…¤</h1><br><h2>ã…¤</h2>

<body class="!bg-[#101012] text-white">
    <div class="max-w-sm mx-auto bg-gray-900 min-h-screen p-4">
 <!-- í—¤ë” -->
 <div class="flex justify-between items-center mb-6">
    <div class="flex items-center space-x-3">
        <img src="https://taejun09.github.io/jungang/assets/image/jungang-main_logo.png" alt="ì¤‘ì•™ì¤‘ ë¡œê³ " class="w-10 h-10 rounded-full">
        <span class="text-[#D9D9D9] text-lg font-semibold tracking-wide">êµ°ì‚°ì¤‘ì•™ê³  ìŠ¤í…Œì´</span>
    </div>
    <div class="flex space-x-4">
        <!-- í•™ìƒì´ë¦„ í‘œì‹œ -->
        <span id="welcomeUser" class="bg-[#363740] text-[#BFBFBF] px-4 py-2 rounded-lg">
            ë¡œë”© ì¤‘...
        </span>        
    </div>
</div>
<script>
(function() {
    try {
        let loggedInUser = localStorage.getItem("loggedInUser");

        if (!loggedInUser) {
            window.location.replace("https://taejun09.github.io/jungang/login");
        } else {
            // âœ… sessionStorageì—ë„ ë¡œê·¸ì¸ ì •ë³´ ë³µêµ¬ (ìƒˆë¡œê³ ì¹¨í•´ë„ ìœ ì§€)
            sessionStorage.setItem("loggedInUser", loggedInUser);

            document.getElementById("welcomeUser").innerText = `${loggedInUser}ë‹˜`;
        }
    } catch (error) {
        console.error("ë¡œê·¸ì¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
        window.location.replace("https://taejun09.github.io/jungang/login");
    }
})();

</script>







<script>
    // í™”ë©´ì˜ ë„ˆë¹„ê°€ 1024px ì´ìƒì´ë©´ PCë¡œ ê°„ì£¼í•˜ê³  ë¦¬ë‹¤ì´ë ‰íŠ¸
    if (window.innerWidth >= 1024) {
      window.location.href = "https://taejun09.github.io/jungang/pc.html";
    }
  </script>

</body>
</head>


<body>
  <script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.2/dist/peerjs.min.js"></script>
    </head>
   

    <style>
        .container {
          max-width: 480px;
          margin: 0 auto;
        }
        .card {
          background: #1e1e22;
          border-radius: 1rem;
          padding: 1rem;
          margin-bottom: 1rem;
        }
        input, button {
          width: 100%;
          margin-top: 0.5rem;
          padding: 0.6rem;
          border: none;
          border-radius: 0.5rem;
        }
        input {
          background: #2c2c30;
          color: white;
        }
        button {
          font-weight: bold;
          color: white;
          cursor: pointer;
        }
        .btn-copy { background: #3B82F6; }
        .btn-share { background: #10B981; }
        .btn-connect { background: #2563EB; }
        .btn-ready { background: #D97706; }
        .btn-start { background: #22C55E; }
      
        .bingo-cell {
          width: 30vw;
          height: 30vw;
          max-width: 100px;
          max-height: 100px;
          font-size: 2rem;
          font-weight: bold;
          display: flex;
          align-items: center;
          justify-content: center;
          border: 2px solid #4b5563;
          border-radius: 0.5rem;
          background: #1f2937;
        }
        .bingo-cell.selected { background-color: #3B82F6; color: white; }
        .bingo-cell.enemy { background-color: #EF4444; color: white; }
        .bingo-cell.completed { background-color: #22C55E !important; }
        .bingo-cell.disabled { pointer-events: none; opacity: 0.6; }
      
        #game-board {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 0.5rem;
          justify-content: center;
        }
      
        #custom-alert {
          position: fixed;
          bottom: 1rem;
          left: 50%;
          transform: translateX(-50%);
          background: #29292e;
          padding: 0.5rem 1rem;
          border-radius: 0.5rem;
          display: none;
          z-index: 10;
        }
      
        #timer-bar-container {
          height: 8px;
          background-color: #333;
          border-radius: 9999px;
          overflow: hidden;
          margin: 1rem 0;
        }
      
        #timer-bar {
          height: 100%;
          background-color: #3B82F6;
          width: 100%;
          transition: width 1s linear;
        }
      
        @media (max-width: 500px) {
          .bingo-cell {
            width: 28vw;
            height: 28vw;
            font-size: 1.8rem;
          }
        }
      
        /* Restart Popup Styling */
        #restart-popup {
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background: #1e1e22;
          padding: 1rem;
          border-radius: 1rem;
          display: none;
          z-index: 20;
        }
        #restart-popup h3 {
          color: white;
          margin-bottom: 1rem;
        }
        #restart-popup button {
          margin-top: 1rem;
        }
      </style>
      </head>
      <body>
        <div class="container">
          <!-- ì—°ê²°/ëŒ€ê¸° UI -->
          <div class="card">
            <h2><i class="fas fa-gamepad mr-2"></i> ì¹œêµ¬ë‘ OX ë¹™ê³ </h2>
            <p><strong>ë‚´ ID:</strong> <span id="my-id">-</span></p>
            <div class="flex gap-2">
              <button class="btn-copy" onclick="copyId()">ID ë³µì‚¬</button>
              <button class="btn-share" onclick="shareId()">ê³µìœ  ë§í¬ ë³µì‚¬</button>
            </div>
            <input id="connect-id" placeholder="ìƒëŒ€ë°© ID ì…ë ¥" />
            <button id="connect-btn" class="btn-connect">ì—°ê²°í•˜ê¸°</button>
            <button id="ready-btn" class="btn-ready" style="display: none;">ì¤€ë¹„í•˜ê¸°</button>
            <button id="start-btn" class="btn-start" style="display: none;">ê²Œì„ ì‹œì‘</button>
          </div>
      
          <!-- ê²Œì„ ì„¤ì • -->
          <div class="card">
            <h3><i class="fas fa-sliders-h mr-2"></i> ê²Œì„ ì„¤ì •</h3>
            <input id="timer-setting" type="number" placeholder="ì œí•œì‹œê°„ (ì´ˆ)" />
            <input id="round-setting" type="number" placeholder="ë¼ìš´ë“œ ìˆ˜" />
          </div>
      
          <!-- ê²Œì„ ì •ë³´ -->
          <div id="game-info" class="card" style="display: none;">
            ë¼ìš´ë“œ: <span id="round-num">1</span> / ë‚´ ìŠ¹ë¦¬: <span id="my-score">0</span> / ìƒëŒ€ ìŠ¹ë¦¬: <span id="enemy-score">0</span>
          </div>
      
          <!-- ê²Œì„íŒ -->
          <div id="game-board" style="display: none;"></div>
      
          <!-- ì œí•œ ì‹œê°„ ë°” -->
          <div id="timer-bar-container" style="display: none;">
            <div id="timer-bar"></div>
          </div>
      
          <!-- ì•Œë¦¼ -->
          <div id="custom-alert"><span id="custom-alert-message">ì•Œë¦¼</span></div>
      
          <!-- íŒì—… -->
          <div id="restart-popup">
            <h3>í•œ íŒ ë” í•˜ì‹œê² ì–´ìš”?</h3>
            <div class="flex gap-2">
              <button class="btn-start" onclick="restartGame()">ë„¤, ë‹¤ì‹œ ì‹œì‘!</button>
              <button class="btn-start" onclick="endGame()">ì•„ë‹ˆìš”, ì¢…ë£Œ</button>
            </div>
          </div>
        </div>
      
        <script>
          const myIdSpan = document.getElementById("my-id");
          const connectBtn = document.getElementById("connect-btn");
          const connectInput = document.getElementById("connect-id");
          const readyBtn = document.getElementById("ready-btn");
          const startBtn = document.getElementById("start-btn");
          const board = document.getElementById("game-board");
          const alertBox = document.getElementById("custom-alert");
          const alertMessage = document.getElementById("custom-alert-message");
          const roundDisplay = document.getElementById("round-num");
          const myScoreDisplay = document.getElementById("my-score");
          const enemyScoreDisplay = document.getElementById("enemy-score");
          const timerBar = document.getElementById("timer-bar");
          const timerContainer = document.getElementById("timer-bar-container");
          const restartPopup = document.getElementById("restart-popup");
      
          let peer, conn;
          let isHost = false;
          let myTurn = false;
          let myMark = 'O', enemyMark = 'X';
          let boardState = Array(9).fill(null);
          let timerDuration = 30;
          let round = 1, myScore = 0, enemyScore = 0, roundLimit = 3;
          let timerInterval;
          let restartVotes = { me: false, enemy: false };
      
          function showAlert(msg) {
            alertMessage.textContent = msg;
            alertBox.style.display = "block";
            setTimeout(() => alertBox.style.display = "none", 2000);
          }
      
          function copyId() {
            navigator.clipboard.writeText(peer.id);
            showAlert("IDê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”!");
          }
      
          function shareId() {
            const url = `https://taejun09.github.io/jungang/page/content/${peer.id}`;
            const message = `[ì¤‘ì•™ìŠ¤í…Œì´ ë¹™ê³  ê²Œì„ ì´ˆëŒ€ ë§í¬]\n\nì¹œêµ¬ê°€ ë‹¹ì‹ ì„ ë¹™ê³  ê²Œì„ì— ì´ˆëŒ€í–ˆì–´ìš”!\nğŸ‘‡ ì•„ë˜ ë§í¬ë¥¼ í´ë¦­í•˜ë©´ ë°”ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.\n${url}`;
            navigator.clipboard.writeText(message);
            showAlert("ê³µìœ  ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”!");
          }
      
          function createBoard() {
            board.innerHTML = "";
            boardState = Array(9).fill(null);
            for (let i = 0; i < 9; i++) {
              const cell = document.createElement("div");
              cell.className = "bingo-cell";
              cell.dataset.index = i;
              cell.addEventListener("click", () => handleClick(i));
              board.appendChild(cell);
            }
          }
      
          function handleClick(i) {
            if (!myTurn || boardState[i]) return;
            boardState[i] = myMark;
            updateBoard();
            send({ type: "move", index: i });
            endTurn();
          }
      
          function updateBoard() {
            document.querySelectorAll(".bingo-cell").forEach((cell, i) => {
              cell.textContent = boardState[i] || "";
              cell.classList.remove("selected", "enemy", "completed");
              if (boardState[i] === myMark) cell.classList.add("selected");
              else if (boardState[i] === enemyMark) cell.classList.add("enemy");
            });
            checkWinner();
          }
      
          function checkWinner() {
            const wins = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
            for (let line of wins) {
              const [a,b,c] = line;
              if (boardState[a] && boardState[a] === boardState[b] && boardState[a] === boardState[c]) {
                line.forEach(i => document.querySelectorAll(".bingo-cell")[i].classList.add("completed"));
                if (boardState[a] === myMark) {
                  myScore++;
                  showAlert("ìŠ¹ë¦¬!");
                } else {
                  enemyScore++;
                  showAlert("ìƒëŒ€ë°© ìŠ¹ë¦¬!");
                }
                nextRound();
                return;
              }
            }
            if (!boardState.includes(null)) {
              showAlert("ë¬´ìŠ¹ë¶€!");
              nextRound();
            }
          }
      
          function nextRound() {
            clearInterval(timerInterval);
            round++;
            if (round > roundLimit) {
              showAlert("ê²Œì„ ì¢…ë£Œ!");
              board.style.display = "none";
              setTimeout(() => {
                showRestartPopup();
              }, 1000);
              return;
            }
            roundDisplay.textContent = round;
            myScoreDisplay.textContent = myScore;
            enemyScoreDisplay.textContent = enemyScore;
            createBoard();
            startTurn(isHost);
          }
      
          function startTurn(turn) {
            myTurn = turn;
            timerContainer.style.display = "block";
            let time = timerDuration;
            timerBar.style.width = "100%";
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
              time--;
              timerBar.style.width = `${(time / timerDuration) * 100}%`;
              if (time <= 0) {
                clearInterval(timerInterval);
                showAlert("ì‹œê°„ ì´ˆê³¼!");
                endTurn();
              }
            }, 1000);
          }
      
          function endTurn() {
            myTurn = false;
            clearInterval(timerInterval);
            send({ type: "end-turn" });
          }
      
          function send(data) {
            if (conn?.open) conn.send(data);
          }
      
          function generateId() {
            const chars = "ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz0123456789";
            const rand = () => Array(3).fill(0).map(() => chars[Math.floor(Math.random() * chars.length)]).join("");
            return `${rand()}-${rand()}-${rand()}`;
          }
      
          function initPeer() {
            const id = generateId();
            peer = new Peer(id);
            peer.on("open", id => myIdSpan.textContent = id);
            peer.on("connection", connection => {
              conn = connection;
              isHost = true;
              setupConnection();
              readyBtn.style.display = "block";
            });
      
            // ìë™ ì—°ê²° ê¸°ëŠ¥
            const urlParts = window.location.pathname.split("/");
            const lastSegment = urlParts[urlParts.length - 1];
            if (/^[\w\-]+$/.test(lastSegment) && lastSegment.length > 5) {
              connectInput.value = lastSegment;
              setTimeout(() => connectBtn.click(), 1000);
            }
          }
      
          function setupConnection() {
            conn.on("data", handleData);
            conn.on("close", () => showAlert("ìƒëŒ€ë°© ì—°ê²° ì¢…ë£Œë¨"));
            conn.on("error", () => showAlert("ì—°ê²° ì˜¤ë¥˜ ë°œìƒ"));
            showAlert("ìƒëŒ€ë°©ê³¼ ì—°ê²°ë¨!");
          }
      
          function handleData(data) {
            if (data.type === "ready") {
              readyBtn.style.display = "none";
              if (isHost) startBtn.style.display = "block";
              showAlert("ìƒëŒ€ë°©ì´ ì¤€ë¹„ ì™„ë£Œ");
            }
            if (data.type === "start-game") {
              timerDuration = data.timerDuration;
              roundLimit = data.roundLimit;
      
              startBtn.style.display = "none";
              document.getElementById("game-info").style.display = "block";
              board.style.display = "grid";
              createBoard();
      
              roundDisplay.textContent = round;
              myScoreDisplay.textContent = myScore;
              enemyScoreDisplay.textContent = enemyScore;
      
              startTurn(isHost);
            }
            if (data.type === "move") {
              boardState[data.index] = enemyMark;
              updateBoard();
              endTurn();
            }
            if (data.type === "end-turn") endTurn();
            if (data.type === "restart-vote") {
              restartVotes.enemy = data.vote;
              checkRestart();
            }
            if (data.type === "end-game") {
              showAlert("ìƒëŒ€ë°©ì´ ê²Œì„ì„ ì¢…ë£Œí–ˆì–´ìš”");
              restartPopup.style.display = "none";
            }
          }
      
          function restartGame() {
            restartVotes.me = true;
            send({ type: "restart-vote", vote: true });
            checkRestart();
          }
      
          function endGame() {
            restartPopup.style.display = "none";
            send({ type: "end-game" });
          }
      
          function checkRestart() {
            if (restartVotes.me && restartVotes.enemy) {
              restartPopup.style.display = "none";
              round = 1;
              myScore = 0;
              enemyScore = 0;
              roundDisplay.textContent = round;
              myScoreDisplay.textContent = myScore;
              enemyScoreDisplay.textContent = enemyScore;
              createBoard();
              startTurn(isHost);
              restartVotes = { me: false, enemy: false };
            }
          }
      
          function showRestartPopup() {
            restartVotes = { me: false, enemy: false };
            restartPopup.style.display = "block";
          }
      
          connectBtn.addEventListener("click", () => {
            const targetId = connectInput.value.trim();
            if (!targetId) return showAlert("ìƒëŒ€ë°© IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
            conn = peer.connect(targetId);
            isHost = false;
      
            conn.on("open", () => {
              setupConnection();
              readyBtn.style.display = "block";
            });
      
            conn.on("error", () => showAlert("ì—°ê²° ì˜¤ë¥˜ ë°œìƒ"));
          });
      
          readyBtn.addEventListener("click", () => {
            send({ type: "ready" });
            readyBtn.style.display = "none";
            showAlert("ì¤€ë¹„ ì™„ë£Œ!");
          });
      
          startBtn.addEventListener("click", () => {
            startBtn.style.display = "none";
            document.getElementById("game-info").style.display = "block";
            board.style.display = "grid";
            createBoard();
      
            const timerInput = document.getElementById("timer-setting").value;
            const roundInput = document.getElementById("round-setting").value;
            timerDuration = parseInt(timerInput) || 30;
            roundLimit = parseInt(roundInput) || 3;
      
            roundDisplay.textContent = round;
            myScoreDisplay.textContent = myScore;
            enemyScoreDisplay.textContent = enemyScore;
      
            startTurn(isHost);
            send({ type: "start-game", timerDuration, roundLimit });
          });
      
          window.onload = initPeer;
        </script>
      </body>



<div class="mobile_popup">
    <a href="https://taejun09.github.io/jungang/" class="menu_item">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25"><path fill="#ADB5BD" fill-rule="evenodd" d="M22.195 10.903 13.984 3.69a2 2 0 0 0-2.676.032l-7.79 7.185a2 2 0 0 0-.643 1.47V20.5a2 2 0 0 0 2 2h6v-5a2 2 0 1 1 4 0v5h6a2 2 0 0 0 2-2v-8.094a2 2 0 0 0-.68-1.503" clip-rule="evenodd"></path></svg>
        <span>í™ˆ</span>
    </a>

    <a href="https://taejun09.github.io/jungang/page/content" class="menu_item">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25"><g fill="#F0F0F0" fill-rule="evenodd" clip-path="url(#clip0_1636_2717)" clip-rule="evenodd"><path d="M3.625 5.5a2.75 2.75 0 0 1 2.75-2.75h12a2.75 2.75 0 0 1 2.75 2.75v6.55a.75.75 0 0 1-1.5 0V5.5c0-.69-.56-1.25-1.25-1.25h-12c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h7.5a.75.75 0 0 1 0 1.5h-7.5a2.75 2.75 0 0 1-2.75-2.75z"></path><path d="M7.625 7.5a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5h-8a.75.75 0 0 1-.75-.75M20.345 19.669a.75.75 0 0 1 1.06 0l2.5 2.5a.75.75 0 1 1-1.06 1.06l-2.5-2.5a.75.75 0 0 1 0-1.06"></path><path d="M17.875 20.2a3 3 0 1 0 0-6 3 3 0 0 0 0 6m0 1.5a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9"></path></g><defs><clipPath id="clip0_1636_2717"><path fill="#fff" d="M.375.5h24v24h-24z"></path></clipPath></defs></svg>
        <span>ì½˜í…ì¸ </span>
    </a>

    <a href="#" class="menu_item" onclick="openMyPage()">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25"><path fill="#ADB5BD" fill-rule="evenodd" d="M12.125 11a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m0 1.5a5 5 0 1 0 0-10 5 5 0 0 0 0 10M12.125 15.25c-4.642 0-8.25 3.326-8.25 7.25a.75.75 0 0 1-1.5 0c0-4.913 4.45-8.75 9.75-8.75s9.75 3.837 9.75 8.75a.75.75 0 0 1-1.5 0c0-3.924-3.608-7.25-8.25-7.25" clip-rule="evenodd"></path></svg>
        <span>MY</span>
    </a>
</div>


<!-- ê³„ì • ì„¤ì • íŒì—… -->
<div id="accountPopup" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-[#18181c] rounded-2xl shadow-xl p-6 w-[90%] max-w-md text-center space-y-5 relative border border-[#2e2e32]">
      <!-- ë‹«ê¸° ë²„íŠ¼ -->
      <button onclick="closeAccountPopup()" class="absolute top-3 right-3 text-gray-400 hover:text-white text-xl">
        &times;
      </button>
  
      <!-- í—¤ë” -->
      <h2 class="text-2xl font-bold text-white">ê³„ì • ì„¤ì •</h2>
  
      <!-- í”„ë¡œí•„ ì •ë³´ -->
      <div class="flex flex-col items-center gap-2">
        <img id="popupImage" src="" alt="í”„ë¡œí•„ ì´ë¯¸ì§€"
             class="w-20 h-20 rounded-full object-cover border-2 border-gray-600 shadow-sm" />
        <p class="text-gray-300"><strong>ì´ë¦„:</strong> <span id="popupName" class="font-medium"></span></p>
        <p class="text-gray-300"><strong>í•™ë²ˆ:</strong> <span id="popupID" class="font-medium"></span></p>
        <p class="text-gray-300"><strong>ê¸°ìˆ™ì‚¬:</strong> <span id="popupDormitory" class="font-medium"></span></p>
      </div>
  
      <!-- ê²½ê³  ì •ë³´ -->
      <div id="warningSection" class="bg-[#2b2c30] border-l-4 border-red-500 p-4 shadow-md rounded-xl text-left space-y-3 w-full">
        <div class="flex items-center gap-2">
          <svg class="w-5 h-5 text-red-400" fill="none" stroke="currentColor" stroke-width="2"
               viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
                  d="M12 9v2m0 4h.01M12 5a7 7 0 00-7 7v1a7 7 0 007 7h1a7 7 0 007-7v-1a7 7 0 00-7-7z" />
          </svg>
          <p class="text-red-300 font-semibold">ëˆ„ì  ê²½ê³ : <span id="warningCount">0</span>íšŒ</p>
        </div>
        
        <div>
          <p class="text-sm text-gray-200 font-medium">ğŸ“Œ ìµœê·¼ ê²½ê³  ë‚´ì—­</p>
          <ul id="recentWarnings" class="list-disc pl-5 text-sm text-gray-400 mt-1 space-y-1">
            <li>ê²½ê³  ë‚´ì—­ ì—†ìŒ</li>
          </ul>
        </div>
      </div>
  
      
      <div class="pt-4 flex justify-center gap-3">
        <button onclick="logout()" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg shadow transition">
          ë¡œê·¸ì•„ì›ƒ
        </button>
      </div>
    </div>
  </div>

  <script>
     function closeAccountPopup() {
    const popup = document.getElementById("accountPopup");
    if (popup) {
      popup.classList.add("hidden");
    }
  }
async function openMyPage() {
  const name = localStorage.getItem("loggedInUser");
  const id = localStorage.getItem("studentID");
  const dormitory = localStorage.getItem("dormitory");
  const image = localStorage.getItem("profileImage");

  if (name && id) {
    document.getElementById("popupName").innerText = name;
    document.getElementById("popupID").innerText = id;
    document.getElementById("popupDormitory").innerText = dormitory;
    document.getElementById("popupImage").src = image || "https://via.placeholder.com/80";
    document.getElementById("accountPopup").classList.remove("hidden");

    // ğŸ›‘ ê²½ê³  ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    try {
      const response = await fetch("https://script.google.com/macros/s/AKfycbxLPFaImo1Dz8IFxLftbSKf16sEZYySYswZ0r7cjVruxpoMKdqbrBHoqLWuxSUBJo_W/exec");
      const data = await response.json();

      // userNameê³¼ studentIDë¥¼ ë¬¸ìì—´ë¡œ ê°•ì œ ë³€í™˜ í›„ ë¹„êµ
      const matchingEntry = data.find(entry =>
        String(entry.userName || "").trim() === name &&
        String(entry.studentID || "").trim() === id
      );

      if (matchingEntry && matchingEntry.warningList) {
        const warnings = matchingEntry.warningList
          .split("||")
          .map(w => w.trim())
          .filter(Boolean); // ë¹ˆ í•­ëª© ì œê±°

        document.getElementById("warningCount").innerText = warnings.length;

        const warningListEl = document.getElementById("recentWarnings");
        warningListEl.innerHTML = "";

        warnings.slice(-3).reverse().forEach(warning => {
          const li = document.createElement("li");
          li.textContent = warning;
          warningListEl.appendChild(li);
        });
      } else {
        document.getElementById("warningCount").innerText = "0";
        document.getElementById("recentWarnings").innerHTML = "<li>ê²½ê³  ê¸°ë¡ ì—†ìŒ</li>";
      }
    } catch (err) {
      console.error("ê²½ê³  ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
      document.getElementById("warningCount").innerText = "N/A";
      document.getElementById("recentWarnings").innerHTML = "<li>ì„œë²„ ì˜¤ë¥˜</li>";
    }
  } else {
    showCustomAlert("ë¡œê·¸ì¸ì´ í•„ìš”í•´ìš”! í™ˆì—ì„œ ì¸ì¦ ë¨¼ì € í•´ì£¼ì„¸ìš”.");
  }
}
  </script>

<script>
let lastScrollY = window.scrollY; // ë§ˆì§€ë§‰ ìŠ¤í¬ë¡¤ ìœ„ì¹˜
const mobilePopup = document.querySelector(".mobile_popup");

document.addEventListener("scroll", function () {
    const currentScrollY = window.scrollY;

    // ëª¨ë°”ì¼ í™”ë©´ì—ì„œë§Œ ë™ì‘í•˜ë„ë¡ ì„¤ì •
    if (window.innerWidth <= 768) {
        if (currentScrollY > lastScrollY) {
            // ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤ ì‹œ
            mobilePopup.style.transform = "translateY(100%)"; // íŒì—…ì„ ì•„ë˜ë¡œ ìˆ¨ê¹€
        } else {
            // ìœ„ë¡œ ìŠ¤í¬ë¡¤ ì‹œ
            mobilePopup.style.transform = "translateY(0)"; // íŒì—…ì„ ë‹¤ì‹œ ë³´ì„
        }
        lastScrollY = currentScrollY; // ë§ˆì§€ë§‰ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
    }
});
</script>

<style>
    .mobile_popup {
    display: flex;
    justify-content: space-around;
    align-items: center;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #1e1e22;
    padding: 10px;
    border-radius: 10px 10px 0 0;
    z-index: 9999;
    border: 1px solid #383840;
    top: 91%;
    transform: translateY(100%); /* ì´ˆê¸° ìƒíƒœì—ì„œ ì•„ë˜ë¡œ ìˆ¨ê¹€ */
    transition: transform 0.3s ease-in-out; /* ë¶€ë“œëŸ¬ìš´ ì „í™˜ */
}

@media screen and (max-width: 768px) {
    .page-wrapper {
      display: none;
    }

    .mobile_popup {
      display: flex;
    }

    .menu_item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      color: #333;
      cursor: pointer;
      text-decoration: none;
    }

    .menu_item svg {
      width: 26px;
      height: 26px;
      margin-bottom: 5px;
    }

    .menu_item span {
      font-size: 12px;
    }

    .menu_item:hover {
      opacity: 0.8;
    }
  }


  .menu_item span {
    font-size: 12px;
    color: #f0f0f0;
}
</style>




 
<!-- í‘¸í„° -->
<footer id="footer" class="bg-[#18181c] py-8 px-4 md:px-12 text-[#D9D9D9] text-sm rounded-lg">
    <div class="max-w-screen-md mx-auto">
        <!-- íšŒì‚¬ ì •ë³´ -->
        <div class="text-[#A0A0A0] leading-relaxed mb-6">
            <p class="font-semibold text-[#D9D9D9]">íŒ€ ë„¥ì„œìŠ¤ì›¨ì´</p>
            <p>ëŒ€í‘œ: ê¹€íƒœì¤€</p>
            <p>ì£¼ì†Œ: ì „ë¶íŠ¹ë³„ìì¹˜ë„ êµ°ì‚°ì‹œ ì„±ì‚°ë©´ êµ°ì¥ëŒ€ê¸¸ 13</p>
            <p class="mt-2">Â© 2025. Team NexusWay.</p>
        </div>

        <!-- ê°œì¸ì •ë³´ ë³´í˜¸ -->
        <div class="mb-6">
            <p class="font-semibold text-[#D9D9D9] flex items-center">
                <a href="https://team-nexusway.notion.site/1c54e0b44e5f801d827ecd375356fe87#1c54e0b44e5f804394bfde69324a9b2b" class="text-[#D9D9D9] hover:text-blue-500">ê°œì¸ì •ë³´ ë³´í˜¸ì¤‘</a> <i class="fas fa-check-circle text-blue-500 ml-1"></i>
            </p>
            <p class="text-[#A0A0A0]">ë„¥ì„œìŠ¤ì›¨ì´ëŠ” ê³ ê°ë‹˜ì˜ ê°œì¸ì •ë³´ ë³´í˜¸ë¥¼ ìœ„í•´ ìµœì„ ì˜ ë…¸ë ¥ì„ ë‹¤í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <!-- ì•½ê´€ -->
        <div class="flex space-x-6 text-[#A0A0A0]">
            <a href="https://team-nexusway.notion.site/1c54e0b44e5f8067b7adefd8cd26f647" class="hover:text-white transition">ì„œë¹„ìŠ¤ ì´ìš© ì•½ê´€</a>
            <a href="https://team-nexusway.notion.site/1c54e0b44e5f801d827ecd375356fe87#1c54e0b44e5f804394bfde69324a9b2b" class="hover:text-white transition">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a>
            <a href="https://team-nexusway.notion.site/1c54e0b44e5f8063a008d4823fd7d425" class="hover:text-white transition">ì œì•ˆí•˜ê¸°</a>
        </div>
    </div>
</footer>

    <script>
        // ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js').then(registration => {
                console.log('âœ… Service Worker ë“±ë¡ ì„±ê³µ:', registration.scope);

                // ì—…ë°ì´íŠ¸ê°€ ìˆì„ ë•Œ ì²˜ë¦¬
                registration.onupdatefound = () => {
                    const newWorker = registration.installing;
                    console.log('ğŸš€ ìƒˆ ì„œë¹„ìŠ¤ ì›Œì»¤ ê°ì§€ë¨!');

                    // ìƒˆ ì›Œì»¤ ìƒíƒœê°€ 'installed'ì¼ ë•Œ
                    newWorker.onstatechange = () => {
                        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                            console.log('ğŸ”„ ìƒˆë¡œìš´ ì—…ë°ì´íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤!');

                            // ğŸ“¢ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ í‘œì‹œ
                            alert('ìƒˆë¡œìš´ ì—…ë°ì´íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤! í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì¹¨í•˜ì„¸ìš”.');

                            // ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì›Œì»¤ ì¦‰ì‹œ í™œì„±í™”
                            newWorker.postMessage({ type: 'skipWaiting' });

                            // í˜ì´ì§€ ìë™ ìƒˆë¡œ ê³ ì¹¨
                            window.location.reload();
                        }
                    };
                };
            }).catch(error => {
                console.log('âŒ Service Worker ë“±ë¡ ì‹¤íŒ¨:', error);
            });

            // ì„œë¹„ìŠ¤ ì›Œì»¤ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë³€ê²½ë  ë•Œ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                console.log('ğŸ”„ ì„œë¹„ìŠ¤ ì›Œì»¤ê°€ ìƒˆë¡œ ê³ ì¹¨ë¨!');
                window.location.reload();
            });
        }
    </script>



<script>
  let idleTimer;
  let isUserActive = true;

  // ê°•ë ¥ ìƒˆë¡œ ê³ ì¹¨ í•¨ìˆ˜ (ìºì‹œ ë¬´ì‹œ)
  function forceReload() {
    console.log("10ì´ˆê°„ í™œë™ ì—†ìŒ â†’ ê°•ë ¥ ìƒˆë¡œê³ ì¹¨");
    location.reload(true); // trueëŠ” ìºì‹œ ë¬´ì‹œ (ë‹¨, ì¼ë¶€ ë¸Œë¼ìš°ì €ëŠ” ë¬´ì‹œí•¨)
    // ë³´ì¥í•˜ë ¤ë©´ ì•„ë˜ì²˜ëŸ¼ query íŒŒë¼ë¯¸í„°ë¡œ ìš°íšŒí•˜ëŠ” ë°©ë²•ë„ ìˆìŒ
    // location.href = location.pathname + '?reload=' + new Date().getTime();
  }

  // ì‚¬ìš©ì í™œë™ ê°ì§€ í•¨ìˆ˜
  function resetIdleTimer() {
    if (!isUserActive) {
      console.log("ì‚¬ìš©ì í™œë™ ê°ì§€ë¨. íƒ€ì´ë¨¸ ì´ˆê¸°í™”");
    }
    isUserActive = true;
    clearTimeout(idleTimer);
    idleTimer = setTimeout(() => {
      isUserActive = false;

      // í˜„ì¬ ì°½ì´ **ì—´ë ¤ ìˆê³ **, ì‚¬ìš©ì ì…ë ¥ì´ ì—†ì—ˆë‹¤ë©´ ìƒˆë¡œê³ ì¹¨
      if (document.visibilityState === 'visible') {
        forceReload();
      }
    }, 10000); // 10ì´ˆ
  }

  // ì‚¬ìš©ì í™œë™ ì´ë²¤íŠ¸ ë°”ì¸ë”©
  ['mousemove', 'scroll', 'keydown', 'click', 'touchstart'].forEach(event => {
    window.addEventListener(event, resetIdleTimer, { passive: true });
  });

  // í˜ì´ì§€ê°€ ì²˜ìŒ ë¡œë“œë  ë•Œ íƒ€ì´ë¨¸ ì‹œì‘
  resetIdleTimer();

  // íƒ­ì´ ë°±ê·¸ë¼ìš´ë“œë¡œ ì „í™˜ë˜ì—ˆë‹¤ê°€ ëŒì•„ì˜¬ ë•Œ ë‹¤ì‹œ ì²´í¬
  document.addEventListener("visibilitychange", () => {
    if (document.visibilityState === 'visible') {
      resetIdleTimer();
    }
  });
</script>



</div>
</body>
</html>

